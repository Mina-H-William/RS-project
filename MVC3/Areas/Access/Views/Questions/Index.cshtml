

<div style="display: flex; justify-content: center; margin: 20px; border-radius:20px; padding:10px;">
    <select id="typeDropdown" style="width:100%;">
        <!option value="" disabled>Select Department</!option>
        <!option value="HR">HR</!option>
        <!option value="Technical">Technical</!option>
    </select>
</div>


<div id="questionsDiv">
    <!-- The partial view content will be loaded here -->
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Initialize select2 and disable search box
            $('#typeDropdown').select2({
                minimumResultsForSearch: Infinity
            });

            // Function to load partial view based on the selected value
            function loadPartialView(selectedValue) {
                $.ajax({
                    url: '@Url.Action("Questions_part", "Questions")',
                    type: 'GET',
                    cache: false, // Prevent caching
                    data: { type: selectedValue }, // Pass the selected value to the action method
                    success: function (result) {
                        $('#questionsDiv').html(result); // Load the result into the div
                    },
                    error: function (xhr, status, error) {
                        console.error("Error loading partial view:", error);
                    }
                });
            }

            // Trigger the AJAX call when the dropdown value changes
            $('#typeDropdown').change(function () {
                var selectedValue = $(this).val(); // Get the selected value from the dropdown
                loadPartialView(selectedValue); // Load the partial view for the selected value
            });

            // Retrieve the session value and set the dropdown
            $.ajax({
                url: '@Url.Action("getType", "Questions")',
                type: 'GET',
                cache:false,
                success: function (response) {
                    var selectedType = response.typedp || ""; // Get the session value or default to empty
                    $('#typeDropdown').val(selectedType).trigger('change'); // Set and trigger change event
                },
                error: function (xhr, status, error) {
                    console.error("Error retrieving session data:", error);
                }
            });

        });
    </script>
}